# Protein Fit Optimization

![Python Version](https://img.shields.io/badge/python-3.8+-blue.svg)
![License](https://img.shields.io/badge/license-MIT-green.svg)

Um sistema de alta performance para alinhamento e empacotamento de m√∫ltiplas estruturas de prote√≠nas (PDB) dentro de envelopes de densidade eletr√¥nica (CIF/MAP), utilizando o algoritmo *Iterative Closest Point (ICP)* otimizado com a m√©trica *Chamfer Distance*.

## üéØ Sobre o Projeto

Em biologia estrutural, √© comum ter um "envelope" de baixa resolu√ß√£o de uma macromol√©cula (obtido, por exemplo, por Microscopia Eletr√¥nica ou SAXS) e um conjunto de estruturas de alta resolu√ß√£o de seus componentes. Este projeto automatiza o processo de encontrar a melhor combina√ß√£o e orienta√ß√£o (fit) dessas estruturas menores dentro do envelope maior.

A ferramenta √© ideal para:
* Modelagem de complexos proteicos.
* Valida√ß√£o de estruturas em dados de baixa resolu√ß√£o.
* An√°lise de encaixe molecular (docking) baseado em forma.

## üöÄ Come√ßando

Siga estas instru√ß√µes para obter uma c√≥pia funcional do projeto em sua m√°quina local.

### Pr√©-requisitos

* Python 3.8 ou superior
* `pip` e `venv`

### Instala√ß√£o

1.  **Clone o reposit√≥rio:**
    ```sh
    git clone [https://github.com/seu-usuario/protein-packing.git](https://github.com/seu-usuario/protein-packing.git)
    cd protein-packing
    ```

2.  **Crie e ative um ambiente virtual:**
    ```sh
    python3 -m venv venv
    source venv/bin/activate
    # No Windows, use: venv\Scripts\activate
    ```

3.  **Instale as depend√™ncias:**
    ```sh
    pip install -r requirements.txt
    ```
    As principais depend√™ncias incluem `numpy`, `scipy` e `biopython`.

## ‚öôÔ∏è Uso

O script principal `main.py` opera em dois modos: `single` para alinhamento de uma √∫nica prote√≠na e `packing` para otimizar o encaixe de m√∫ltiplas prote√≠nas.

### Modo 1: Alinhamento de Prote√≠na √önica (`single`)

Alinha uma √∫nica estrutura PDB a um envelope de refer√™ncia. √ötil para testes r√°pidos e alinhamentos individuais.

**Comando:**
```sh
python3 src/main.py single -i data/protein.pdb -e data/envelope.cif -o results/single_output
```

### Modo 2: Empacotamento de M√∫ltiplas Estruturas (`packing`)

Testa um conjunto de PDBs, seleciona as que melhor se encaixam no envelope sem sobreposi√ß√£o e gera um modelo combinado.

**Comando:**
```sh
python3 src/main.py packing -i data/pdbs/ -e data/envelope.cif -o results/packing_output
```
O resultado final ser√° salvo como `results/packing_output/packing_result.pdb`.

### Par√¢metros Opcionais

Os par√¢metros abaixo podem ser usados em ambos os modos para ajustar a precis√£o e o desempenho do algoritmo.

| Par√¢metro            | Descri√ß√£o                                                                      | Padr√£o |
| -------------------- | ------------------------------------------------------------------------------ | ------ |
| `--max-iter`         | N√∫mero m√°ximo de itera√ß√µes para o algoritmo ICP.                               | `50`   |
| `--max-structures`   | (Apenas `packing`) N√∫mero m√°ximo de PDBs a serem testados do diret√≥rio de entrada. | `20`   |
| `--n-rotations`      | N√∫mero de rota√ß√µes iniciais a testar para encontrar o melhor alinhamento global. | `12`   |

## üõ†Ô∏è Metodologia

O n√∫cleo do alinhamento √© baseado em dois conceitos principais:

* **Iterative Closest Point (ICP):** Um algoritmo que alinha duas nuvens de pontos (neste caso, os √°tomos da prote√≠na e os pontos do envelope) minimizando iterativamente a dist√¢ncia entre eles.
* **Chamfer Distance:** Uma m√©trica de dissimilaridade entre duas nuvens de pontos. Ela mede a dist√¢ncia m√©dia de cada ponto em um conjunto ao seu vizinho mais pr√≥ximo no outro conjunto. Foi escolhida por ser robusta a ru√≠do e eficaz para comparar formas complexas.

## üìÅ Estrutura do Projeto

```
protein-packing/
‚îú‚îÄ data/             # (N√£o versionado) Armazena arquivos PDB de entrada e envelopes.
‚îú‚îÄ src/              # C√≥digo fonte Python.
‚îÇ  ‚îú‚îÄ main.py        # Orquestrador principal (executa os modos 'single' e 'packing').
‚îÇ  ‚îú‚îÄ icp_aligner.py # Implementa√ß√£o do alinhamento ICP + Chamfer Distance.
‚îÇ  ‚îî‚îÄ pdb_packing.py # L√≥gica para sele√ß√£o e empacotamento de m√∫ltiplas prote√≠nas.
‚îú‚îÄ results/          # (N√£o versionado) Diret√≥rio para salvar os resultados.
‚îú‚îÄ .gitignore
‚îî‚îÄ README.md
```

Veja os [issues abertos](https://github.com/seu-usuario/protein-packing/issues) para uma lista completa de funcionalidades propostas (e problemas conhecidos).

## ü§ù Contribui√ß√£o

Contribui√ß√µes s√£o o que tornam a comunidade de c√≥digo aberto um lugar incr√≠vel para aprender, inspirar e criar. Qualquer contribui√ß√£o que voc√™ fizer ser√° **muito apreciada**.

1.  Fa√ßa um *Fork* do projeto
2.  Crie sua *Feature Branch* (`git checkout -b feature/AmazingFeature`)
3.  Fa√ßa o *Commit* de suas altera√ß√µes (`git commit -m 'Add some AmazingFeature'`)
4.  Fa√ßa o *Push* para a *Branch* (`git push origin feature/AmazingFeature`)
5.  Abra um *Pull Request*

## üìú Licen√ßa

Distribu√≠do sob a licen√ßa MIT. Veja `LICENSE.txt` para mais informa√ß√µes.

---
